import{j as t,R as u,c as d,a as m,b as h,r as l,N as x,g as j,u as _,d as g,e as P,s as N,f as v,h as p,i as I,k as S}from"./index-f80f8b70.js";import{r as T,F as c,I as b,T as C}from"./controls-08e9a7b2.js";import{r as y}from"./redirectToLogin-3287a2cf.js";const k=s=>t.jsxs("div",{className:"posts__item item-posts",children:[t.jsx("div",{className:"item-posts__logo",children:t.jsx("img",{src:"/src/img/user.png",alt:"image"})}),t.jsx("div",{className:"item-posts__name",children:s.post.From}),t.jsx("div",{className:"item-posts__text",children:s.post.Message})]}),F=u.memo(s=>{const a=e=>{s.addNewPost(e["posts name"],e["posts message"])};return t.jsx("div",{className:"posts",children:t.jsxs("div",{className:"posts__body",children:[t.jsx(E,{onSubmit:a}),t.jsx("div",{className:"posts__items",children:[...s.posts.postsData].reverse().map(e=>t.jsx(k,{post:e},e.id))})]})})}),M=s=>t.jsxs("form",{onSubmit:a=>{s.handleSubmit(),s.reset("postsForm"),a.preventDefault()},className:"posts__controls controls-posts",children:[t.jsx("div",{className:"controls-posts__item",children:t.jsx(c,{name:"posts name",component:b,placeholder:"from",type:"text",autoComplete:"off",className:"controls-posts__input _input"})}),t.jsx("div",{className:"controls-posts__item",children:t.jsx(c,{name:"posts message",component:C,placeholder:"enter your message",className:"controls-posts__textarea _input"})}),t.jsx("button",{type:"submit",className:"controls-posts__button _btn",children:"Create post"})]}),E=T({form:"postsForm"})(M);let R=s=>({posts:s.profile});const w=d(m(R,{addNewPost:h}))(F),D=s=>{const[a,e]=l.useState(!1),[o,i]=l.useState(s.status),n=()=>{e(!0)},f=r=>{s.updateStatusThunkCreator(r),e(!1)};return l.useEffect(()=>{i(s.status)},[s.status]),t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"profile-status__title",children:"Status"}),s.statusProccess?t.jsx("div",{className:"loader loader-placement",children:t.jsx("img",{src:"/src/img/loader.gif",alt:"load..."})}):a===!1?t.jsx("div",{children:t.jsx("button",{onClick:r=>{s.userId==s.myId&&n(),r.preventDefault()},className:"profile-status__button _btn",children:s.userId==s.myId?s.status?s.status+" click to change":"click to change status":s.status})}):t.jsx("div",{children:t.jsx("input",{autoFocus:!0,placeholder:"Change Status",onChange:r=>{i(r.currentTarget.value)},onBlur:r=>{s.userId==s.myId&&f(o)},type:"text",className:"profile-status__input _input",value:o})})]})},$=s=>s.currentProfile?t.jsxs("div",{className:"profile__body",children:[t.jsx("div",{className:"profile__image",children:t.jsx("img",{src:s.currentProfile.photos.large?s.currentProfile.photos.large:"/src/img/user.png",alt:"logo"})}),t.jsxs("div",{className:"profile__name",children:[s.currentProfile.aboutMe," ",t.jsx("br",{}),s.currentProfile.fullName]}),t.jsx("div",{className:"profile__description",children:s.currentProfile.userId!==s.myId?`Follow: ${s.currentProfile.followed?"true":"false"}`:t.jsx("p",{children:"My profile"})}),t.jsx("div",{className:"profile__status profile-status",children:t.jsx(D,{myId:s.myId,statusProccess:s.statusProccess,updateStatusThunkCreator:s.updateStatusThunkCreator,userId:s.userId,status:s.statusText,changeStatus:s.changeStatus})}),t.jsx("div",{className:"profile__find",children:s.currentProfile.lookingForAJob?t.jsx("p",{children:"Yes, i find a job"}):t.jsx("p",{children:"No, i find't a job"})})]}):t.jsx(x,{to:"/login"}),z=s=>s.initilize?t.jsxs("div",{className:"profile",children:[t.jsx($,{statusProccess:s.statusProccess,userId:s.params.userId,updateStatusThunkCreator:s.updateStatusThunkCreator,currentProfile:s.currentProfile,changeStatus:s.changeStatus,statusText:s.statusText,myId:s.myId}),t.jsx(w,{})]}):t.jsx("div",{className:"loader",children:t.jsx("img",{src:"/src/img/loader.gif",alt:"load..."})});function U(s){function a(e){let o=_(),i=g(),n=P();return t.jsx(s,{...e,location:o,params:n,navigate:i})}return a}class A extends u.Component{componentDidMount(){this.props.setUserProfileThunkCreator(this.props.params.userId)}render(){return t.jsx(z,{...this.props})}}let L=s=>({currentProfile:s.profile.currentProfile,statusText:s.profile.statusText,statusProccess:s.profile.statusProccess,myId:s.auth.id,initilize:j(s)});const J=d(m(L,{setUserProfile:N,setUserProfileThunkCreator:v,changeStatus:p,getStatusThunkCreator:I,updateStatusThunkCreator:S}),U,y)(A);export{J as default};
