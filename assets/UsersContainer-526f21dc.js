import{j as s,l as u,r as i,a as c,m as g,o as d,p as f,q as h,t as m,v as _,w,x,y as j,z as N,A as v,B as b,C,D as P}from"./index-f80f8b70.js";const S=e=>Number(e.followingInProgress[0])!=Number(e.user.id)||!e.followingInProgress[1]?e.user.followed?s.jsx("button",{onClick:n=>{Number(e.followingInProgress[0])||e.unfollow(e.user.id),n.preventDefault()},className:"user__button _btn",children:"Unfollow"}):s.jsx("button",{onClick:n=>{Number(e.followingInProgress[0])||e.follow(e.user.id),n.preventDefault()},className:"user__button _btn",children:"follow"}):s.jsx("div",{className:"loader loader-placement",children:s.jsx("img",{src:"/src/img/loader.gif",alt:"load..."})}),U=e=>s.jsxs("div",{className:"user",children:[s.jsxs("div",{className:"user__body",children:[s.jsxs("div",{className:"user__info",children:[s.jsx(u,{to:`/profile/${e.user.id}`,className:"user__name",children:e.user.name}),s.jsx("div",{className:"user__description",children:e.user.status})]}),s.jsxs("div",{className:"user__location",children:[s.jsx("div",{className:"user__location-label",children:"Location"}),s.jsxs("div",{className:"user__location-items",children:[s.jsxs("div",{className:"user__location-item",children:[s.jsx("span",{children:"City"}),s.jsx("div",{className:"user__location-filter"}),"props.user.location.city"]}),s.jsxs("div",{className:"user__location-item",children:[s.jsx("span",{children:"Street"}),s.jsx("div",{className:"user__location-filter"}),"props.user.location.street"]})]})]})]}),s.jsx(S,{followingInProgress:e.followingInProgress,user:e.user,follow:e.follow,unfollow:e.unfollow})]},e.user.id),k=e=>{let n=Math.ceil(e.totalCount/e.pageSize),a=[];for(let t=1;t<=n;t++)a.push(t);const r=e.left,l=e.right,o=i.useMemo(()=>a.filter(t=>t>=r&&t<=l),[e.left,e.right]);return s.jsxs("div",{className:"users",children:[s.jsxs("div",{className:"users__block",children:[r!=0&&s.jsx("button",{type:"button",onClick:t=>{e.setLeft(r,!1),e.setRight(l,!1)},className:"users__left users__button",children:"Prev"}),s.jsx("div",{className:"users__pagination pagination",children:o.map(t=>s.jsx("span",{onClick:T=>{e.setCurrentPage(t),e.getData(t,e.pageSize)},className:e.currentPage===t?"pagination__button active":"pagination__button not-active",children:t},t))}),l!=e.totalCount&&s.jsx("button",{type:"button",onClick:t=>{e.setLeft(r,!0),e.setRight(l,!0)},className:"users__right users__button",children:"Next"})]}),s.jsxs("div",{className:"users__items",children:["					",e.users.map(t=>s.jsx(U,{toggleFollowing:e.toggleFollowing,followingInProgress:e.followingInProgress,follow:e.follow,unfollow:e.unfollow,user:t},t.id))]}),s.jsx("button",{onClick:t=>{e.showMoreUsers(e.currentPage,e.pageSizeShowMore+2),t.preventDefault()},className:"users__button _btn",children:" Show more"})]})},I=e=>{const n=(l,o)=>{e.getUsersThunkCreator(l,o)},a=l=>{e.setFollowThunkCreator(l)},r=l=>{e.setUnfollowThunkCreator(l)};return i.useEffect(()=>{n(e.users.currentPage,e.users.pageSize)},[]),s.jsx(s.Fragment,{children:e.users.isFetching?s.jsx("div",{className:"loader",children:s.jsx("img",{src:"/src/img/loader.gif",alt:"Loading..."})}):s.jsx(k,{users:e.users.usersData,setCurrentPage:e.setCurrentPage,getData:n,showMore:e.showMore,currentPage:e.users.currentPage,totalCount:e.users.totalCount,pageSize:e.users.pageSize,follow:a,pageSizeShowMore:e.users.pageSizeShowMore,unfollow:r,isFetching:e.users.isFetching,followingInProgress:e.users.followingInProgress,redirectToLogin:e.redirectToLogin,showMoreUsers:e.showMoreUsers,left:e.left,right:e.right,setRight:e.setRight,setLeft:e.setLeft})})};let M=e=>({users:g(e),left:d(e),right:f(e)}),L={follow:h,unfollow:m,showMore:_,setCurrentPage:w,toggleFollowing:x,getUsersThunkCreator:j,setUnfollowThunkCreator:N,setFollowThunkCreator:v,showMoreUsers:b,setLeft:C,setRight:P};const F=c(M,L)(I);export{F as default};
